var registerMenuClass,initMenu;function MenuItem(){this.parent=void 0,this.element=void 0,this.data=void 0}function Menu(){this.items=new Array}!function(){var t=$,e=/chrome/i.test(navigator.userAgent),n=/firefox/i.test(navigator.userAgent),i={},r=void 0,a=!1,o=!1,u=!1,s=function(){var t=getComputedStyle(document.body).getPropertyValue("--d");return t.length?parseInt(t):0},l=function(e){if(menuData=p(e),null==menuData)return!1;var n=menuData.items,i=function(t){var e=null!=t&&null!=t.menuClass?t.menuClass:"Menu";return new window[e]}(menuData),r=t(e).parent(),a=t(r)[0].itemData;null!=a&&(a.subMenu=i),i.setData(menuData,e);var o=!0;return t(e).children("li").each(function(){var e=function(t){var e=null!=t&&null!=t.menuItemClass?t.menuItemClass:"MenuItem";return new window[e]}(n);e.setData(n,this),i.items.push(e),t(this).children("ul").each(function(){l(this)||(o=!1)}),e.addEvents()}),i.addEvents(),o},h=function(e){t(e).each(function(){var e=t(this)[0].itemData;null!=e&&(null!=e.subMenu&&t(this).children("ul").each(function(){h(t(this).children())}),"none"!=t(this).children().first().css("display")&&e.animate("hover_out"),e.restore(),e.open=!1,e.autoHoverOut=void 0)})},p=function(e){var n=void 0,i=t(e).attr("class").split(/\s+/);return t.each(i,function(t,e){if(null!=(n=d(e)))return!1}),n},d=function(t){return i[t]},f=function(e){t(e).each(function(){"none"==t(this).css("display")&&t(this).css("display","block")}),null==f.id&&(f.id=0),++f.id,t(document).on("touchend.menu."+f.id,function(e,n){return function(i){for(var r=t(e)[0].itemData,a=e;null!=r.parent;)a=r.element,r=r.parent;a.contains(i.target)||(n<=f.id&&(h(a),f.id=n-1),t(document).off("touchend.menu."+n))}}(e,f.id))};registerMenuClass=function(t,e){i[t]=e},initMenu=function(t){return!!l(t)},MenuItem.prototype.setData=function(e,n){this.data=e,this.element=n,parentElement=t(n).parent();var i=t(parentElement)[0].itemData;this.parent=null!=i?i:void 0,t(n)[0].itemData=this};var m=function(e,n){for(var i in n)if(0==i.indexOf("child:")){for(var r=i.substr(6).split(":"),a=e,o=0;o<r.length;o++)a=t(a).children().eq(r[o]);null!=n[i].tag&&(a=t(a).find(n[i].tag)),m(a,n[i].properties)}else"animate"!=i&&"duration"!=i&&("style"==i?n[i].length?t(e).attr(i,n[i]):t(e).removeAttr(i):t(e).css(i,n[i]))},c=function(t){return t&&"object"==typeof t&&!Array.isArray(t)},v=function(t){var e={};for(var n in t)c(t[n])?e[n]=v(t[n]):e[n]=t[n];return e},g=function(t,e){var n=v(t);for(var i in e)c(n[i])&&c(e[i])?n[i]=g(t[i],e[i]):n[i]=e[i];return n};MenuItem.prototype.addEvents=function(){var e=function(e){if("touchstart"==e.type){if(u=!1,0==o&&(o=!0,1==a))return}else if("touchend"==e.type&&(u=!0),1==o&&("touchend"==e.type||0==u&&"click"==e.type))return;for(var n,i=e.target,r=t(i)[0].itemData;null==r&&null!=i;)i=i.parentElement,r=t(i)[0].itemData;if(null!=r.subMenu)"none"==t(r.subMenu.element).css("display")?(r.hoverIn.call(r.element,e),r.expand()):t(r.subMenu.element).is(":animated")||setTimeout((n=r.element,function(){h(n)}),50);else{for(var s;null!=r.parent;)s=r.element,r=r.parent;setTimeout(function(t){return function(){h(t)}}(s),500)}},n=this.element,i=this.subMenu;null!=this.data.hover?(t(n).hover(this.hover),null==i&&t(n).on("touchstart",this.hover)):null!=this.data.hover_in&&null!=this.data.hover_out&&(t(n).hover(this.hoverIn,this.hoverOut),t(n).on("touchstart",null!=i?e:this.hoverIn),null==i&&t(n).on("touchend",e)),t(n).on("click",e)},MenuItem.prototype.getAnimationProperties=function(e,n){if(null!=e){null==this.values&&(this.values={});var i=s();if(null==this.values[i]){var r=this.element;this.values[i]={width:t(r).width(),height:t(r).height(),marginLeft:t(r).css("margin-left"),marginTop:t(r).css("margin-top")}}for(var a=i;null!=e&&a>=0&&null==e[a];)--a;a>=0&&null!=e&&(e=e[a]);var o=t.extend({},e);if("initial"==o.width?o.width=this.values[i].width:"+dx"==o.width?o.width=parseInt(this.values[i].width)+parseInt(n.dx)+"px":"dx"==o.width&&(o.width=parseInt(n.dx)+"px"),"initial"==o.height?o.height=this.values[i].height:"+dy"==o.height?o.height=parseInt(this.values[i].height)+parseInt(n.dy)+"px":"dy"==o.height&&(o.height=parseInt(n.dy)+"px"),"dx"==o.left&&(o.left=n.dx+"px"),"dy"==o.top&&(o.top=n.dy+"px"),"dy"==o.marginTop?o.marginTop=parseInt(n.dy)+"px":"-dy"==o.marginTop&&(o.marginTop=-parseInt(n.dy)+"px"),"-dy"==o.paddingTop&&(o.paddingTop=-parseInt(n.dy)+"px"),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches){var u={};for(var l in Object.assign(u,o),o)l.startsWith("@dark:")&&(u[l.substring(6)]=o[l]);o=u}return o}},MenuItem.prototype.animate=function(e,n){var i=this.element,r=null!=n&&null!=n.queue?n.queue:"fx",a=e.indexOf(":"),o=void 0;a>0&&(o=e.substring(a+1),e=e.substring(0,a));var u=this.data[e];null!=o&&(u=g(u,this.data[e+"_"+o])),null!=u.autoHoverOut&&(this.autoHoverOut=u.autoHoverOut),null!=u.before&&m(i,this.getAnimationProperties(u.before,n));var l,h=s();if(t(i).stop(r,!0).animate(this.getAnimationProperties(u.properties,n),{duration:1==u.animate?u.duration:0,queue:r,complete:(l=this.getAnimationProperties(u.after,n),function(){null==l&&(l={}),l.overflow="",m(this,l)}),step:function(e,n,i){return function(){null==e&&(e={}),null==e.overflow&&(e.overflow="visible");var r=e.calc;if(null!=r){Array.isArray(r)||(r=[r]);for(var a=t(this).width(),o=0;o<r.length;o++)"marginTop"==r[o]?e.marginTop=parseInt(n.values[i].marginTop)+(parseInt(n.values[i].height)-t(this).height())+"px":"marginLeft"==r[o]?e.marginLeft=parseInt(n.values[i].marginLeft)+(parseInt(n.values[i].width)-a)+"px":"width"==r[o]&&(a=0,t(this).children("li").each(function(){a+=t(this).width(),a+=parseInt(t(this).css("margin-left")),a+=parseInt(t(this).css("border-left")),a+=parseInt(t(this).css("margin-right")),a+=parseInt(t(this).css("border-right"))}),e.width=a+1+"px")}m(this,e)}}(this.getAnimationProperties(u.step,n),this,h)}).dequeue(r),null!=u.content&&this.animateContent(u.content.event,n),null!=u.submenu){var p=u.submenu.event;null!=this.subMenu&&("function"==typeof this.subMenu[p]?this.subMenu[p].call(this.subMenu.element):this.subMenu.animate(p,n))}if(null!=u.parentmenu){var d=u.parentmenu.event;null!=this.parent&&("function"==typeof this.parent[d]?this.parent[d].call(this.parent.element):this.parent.animate(d,n))}},MenuItem.prototype.animateContent=function(t,e){this.doAnimateContent(t,e)},MenuItem.prototype.doAnimateContent=function(e,n){var i=this.element,r=t(i).children().first().find(".menu-content");0==r.length&&(r=t(i).children().first());var a=this.data.content[e];null!=a.before&&m(r,this.getAnimationProperties(a.before,n));var o,u=null!=n&&null!=n.queue?n.queue:"fx";for(var s in t(r).stop(u,!0).animate(this.getAnimationProperties(a.properties,n),{duration:1==a.animate?a.duration:0,queue:u,complete:(o=this.getAnimationProperties(a.after,n),function(){null!=o&&m(this,o)}),step:function(t){return function(){null!=t&&m(this,t)}}(this.getAnimationProperties(a.step,n))}).dequeue(u),a)if(0==s.indexOf("child:")){for(var l=s.substr(6).split(":"),h=r,p=0;p<l.length;p++)h=t(h).children().eq(l[p]);null!=a[s].tag&&(h=t(h).find(a[s].tag)),t(h).stop(u,!0).animate(this.getAnimationProperties(a[s].properties,n),{duration:1==a.animate?null!=a[s].duration?a[s].duration:a.duration:0,queue:u,complete:function(t){return function(){null!=t&&m(this,t)}}(this.getAnimationProperties(a[s].after,n)),step:function(t){return function(){null!=t&&m(this,t)}}(this.getAnimationProperties(a[s].step,n))}).dequeue(u)}},MenuItem.prototype.hover=function(){0!=t(this).height()&&t(this)[0].itemData.animate("hover")},MenuItem.prototype.hoverIn=function(i,u){if("mouseenter"==i.type){if(1==o)return;0==a&&(a=!0)}if(0!=t(this).height()){if(1!=u){var s=t(this).find("div")[0].getBoundingClientRect(),l=i.clientX;if(!n){var h=parseFloat(window.getComputedStyle(document.body).getPropertyValue("zoom"));h||(h=1),s={left:s.left*h,right:s.right*h,top:s.top*h,bottom:s.bottom*h},e||(s.top+=window.pageYOffset*(h-1),s.bottom+=window.pageYOffset*(h-1))}if(l<parseInt(s.left)||l>=parseInt(s.right))return;var p=i.clientY;if(p<parseInt(s.top)||p>=parseInt(s.bottom))return}var d=t(this)[0].itemData;if(1==d.open)return;d.animate("hover_in"),d.expand(),d.open=!0,null==r||r==d||r.element.contains(i.target)||r.hoverOut.call(r.element),r=d}},MenuItem.prototype.hoverOut=function(e){if((1!=o||null==e||"mouseleave"!=e.type)&&0!=t(this).height()){var n=t(this)[0].itemData;!1!==n.autoHoverOut&&(h(n.element),n.animate("hover_out"),n.restore(),n.open=!1,n.autoHoverOut=void 0,r=void 0)}},MenuItem.prototype.expand=function(){var e=this.element,n=t(e).attr("data-anim");if(null!=n){var i=n.split(";"),r=s();if(r<i.length){var a=i[r];if(a.length>0){var o,u=a.split(":"),l=u[0];if("push_right"==l)(h=u[2])<0&&(l+=":move_up"),o={dx:u[1],dy:h};else if("push_left"==l){(h=u[2])<0&&(l+=":move_up"),o={dx:u[1],dy:h}}else if("push_up"==l){o={dx:u[1],dy:u[2]}}else if("push_down"==l){o={dx:u[1],dy:u[2]}}else if("expand_up"==l){o={dx:u[1],dy:u[2]}}else if("expand_down"==l){o={dx:u[1],dy:u[2]}}else if("expand_right"==l){(h=u[2])<0&&(l+=":move_up"),o={dx:u[1],dy:h}}else if("expand_left"==l){var h;(h=u[2])<0&&(l+=":move_up"),o={dx:u[1],dy:h}}t.extend(o,{queue:"alt_fx"}),this.animate(l,o)}}}},MenuItem.prototype.restore=function(){var e=this.element,n=t(e).attr("data-anim");if(null!=n){var i=n.split(";"),r=s();if(r<i.length){var a=i[r];if(a.length>0){var o,u=a.split(":"),l=u[0];if("push_right"==l)l="pull_left",(h=u[2])<0&&(l+=":move_down"),o={dx:u[1],dy:h};else if("push_left"==l){l="pull_right",(h=u[2])<0&&(l+=":move_down"),o={dx:u[1],dy:h}}else if("push_up"==l){l="pull_down",o={dx:u[1],dy:u[2]}}else if("push_down"==l){l="pull_up",o={dx:u[1],dy:u[2]}}else if("expand_up"==l){l="shrink_down",o={dx:u[1],dy:u[2]}}else if("expand_down"==l){l="shrink_up",o={dx:u[1],dy:u[2]}}else if("expand_right"==l){l="shrink_left",(h=u[2])<0&&(l+=":move_down"),o={dx:u[1],dy:h}}else if("expand_left"==l){var h;l="shrink_right",(h=u[2])<0&&(l+=":move_down"),o={dx:u[1],dy:h}}t.extend(o,{queue:"alt_fx"}),this.animate(l,o)}}}},MenuItem.prototype.show=function(){var e=t(this)[0].itemData;!0,f(this),e.animate("show",{complete:function(){!1,console.log("menuShow = false")}})},MenuItem.prototype.hide=function(){t(this)[0].itemData.animate("hide")},Menu.prototype=new MenuItem,Menu.prototype.animateContent=function(t){for(var e in this.items){this.items[e].animateContent(t)}},t(window).on("touchmove",function(t){null!=r&&r.hoverOut.call(r.element)})}();
